
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../17/jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/" rel="prev"/>
<link href="../../../09/01/rag%E4%B8%AD%E8%B7%A8%E9%A1%B5%E8%A1%A8%E6%A0%BC%E7%9A%84%E5%A4%84%E7%90%86/" rel="next"/>
<link href="../../../../../images/logo.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.16" name="generator"/>
<title>蚂蚁面试官：介绍设计模式及其在工作中的应用？ - Gary's Blog</title>
<link href="../../../../../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/>
<link href="../../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="black" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#creational-patterns-">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Gary's Blog" class="md-header__button md-logo" data-md-component="logo" href="../../../../.." title="Gary's Blog">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Gary's Blog
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              蚂蚁面试官：介绍设计模式及其在工作中的应用？
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="black" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="black" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../..">
        
  
  
    
  
  首页

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../../../">
          
  
  
    
  
  技术

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../%E6%97%85%E8%A1%8C/">
          
  
  
    
  
  旅行

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../%E6%91%84%E5%BD%B1/">
          
  
  
    
  
  摄影

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../%E8%BF%90%E5%8A%A8/">
          
  
  
    
  
  运动

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden="">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Gary's Blog" class="md-nav__button md-logo" data-md-component="logo" href="../../../../.." title="Gary's Blog">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Gary's Blog
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../..">
<span class="md-ellipsis">
    首页
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../">
<span class="md-ellipsis">
    技术
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            技术
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
<span class="md-ellipsis">
    Archive
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../archive/2025/">
<span class="md-ellipsis">
    2025
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
<span class="md-ellipsis">
    Categories
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Categories
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/agent/">
<span class="md-ellipsis">
    Agent
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/java/">
<span class="md-ellipsis">
    JAVA
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/rag/">
<span class="md-ellipsis">
    RAG
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/redis/">
<span class="md-ellipsis">
    Redis
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/sft/">
<span class="md-ellipsis">
    SFT
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/sre/">
<span class="md-ellipsis">
    SRE
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/%E5%B9%B6%E5%8F%91/">
<span class="md-ellipsis">
    并发
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/%E6%95%B0%E6%8D%AE%E5%BA%93/">
<span class="md-ellipsis">
    数据库
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
<span class="md-ellipsis">
    设计模式
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../category/%E9%9D%A2%E7%BB%8F/">
<span class="md-ellipsis">
    面经
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../%E6%97%85%E8%A1%8C/">
<span class="md-ellipsis">
    旅行
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            旅行
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../%E6%91%84%E5%BD%B1/">
<span class="md-ellipsis">
    摄影
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            摄影
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../%E8%BF%90%E5%8A%A8/">
<span class="md-ellipsis">
    运动
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            运动
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content md-content--post" data-md-component="content">
<div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner md-post">
<nav class="md-nav md-nav--primary">
<div class="md-post__back">
<div class="md-nav__title md-nav__container">
<a class="md-nav__link" href="../../../../">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
<span class="md-ellipsis">
                    Back to index
                  </span>
</a>
</div>
</div>
<ul class="md-post__meta md-nav__list">
<li class="md-nav__item md-nav__item--section">
<div class="md-post__title">
<span class="md-ellipsis">
                    Metadata
                  </span>
</div>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<div class="md-nav__link">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"></path></svg>
<time class="md-ellipsis" datetime="2025-08-19 00:00:00+00:00">Tuesday, August 19, 2025</time>
</div>
</li>
<li class="md-nav__item">
<div class="md-nav__link">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"></path></svg>
<span class="md-ellipsis">
                            in
                            
                              <a href="../../../../category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>, 
                              <a href="../../../../category/%E9%9D%A2%E7%BB%8F/">面经</a></span>
</div>
</li>
<li class="md-nav__item">
<div class="md-nav__link">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"></path></svg>
<span class="md-ellipsis">
                            
                              7 min read
                            
                          </span>
</div>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#creational-patterns-">
<span class="md-ellipsis">
      一、 创建型模式 (Creational Patterns) - 关注对象创建机制
    </span>
</a>
<nav aria-label="一、 创建型模式 (Creational Patterns) - 关注对象创建机制" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-singleton-pattern">
<span class="md-ellipsis">
      1. 单例模式 (Singleton Pattern)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-factory-method-pattern">
<span class="md-ellipsis">
      2. 工厂方法模式 (Factory Method Pattern)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#structural-patterns-">
<span class="md-ellipsis">
      二、 结构型模式 (Structural Patterns) - 关注类和对象的组合
    </span>
</a>
<nav aria-label="二、 结构型模式 (Structural Patterns) - 关注类和对象的组合" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#3-decorator-pattern">
<span class="md-ellipsis">
      3. 装饰器模式 (Decorator Pattern)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-proxy-pattern">
<span class="md-ellipsis">
      4. 代理模式（Proxy Pattern）
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#behavioral-patterns-">
<span class="md-ellipsis">
      三、 行为型模式 (Behavioral Patterns) - 关注对象之间的通信
    </span>
</a>
<nav aria-label="三、 行为型模式 (Behavioral Patterns) - 关注对象之间的通信" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#5-observer-pattern">
<span class="md-ellipsis">
      5. 观察者模式 (Observer Pattern)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-strategy-pattern">
<span class="md-ellipsis">
      6. 策略模式 (Strategy Pattern)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      总结
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<article class="md-content__inner md-typeset">
<h1>蚂蚁面试官：介绍设计模式及其在工作中的应用？</h1>
<p>设计模式是软件设计中针对常见问题的 可复用解决方案模板 ，是 最佳实践的总结 ，能提高代码的可维护性、可扩展性和可复用性。昨天在面试蚂蚁的时候，被问到了设计模式的问题，我回答的不是很好，今天就来总结一下常见的设计模式，及其在工作中的应用。</p>
<!-- more -->
<h2 id="creational-patterns-">一、 创建型模式 (Creational Patterns) - 关注对象创建机制</h2>
<h3 id="1-singleton-pattern">1. 单例模式 (Singleton Pattern)</h3>
<ul>
<li><strong>意图：</strong> 确保一个类只有一个实例，并提供一个全局访问点。</li>
<li><strong>关键点：</strong><ul>
<li>私有化构造函数（防止外部 <code>new</code>）。</li>
<li>提供一个静态方法（如 <code>getInstance()</code>）来获取唯一实例。</li>
<li>在静态方法内部控制实例的创建（通常是延迟初始化）。</li>
<li>需要考虑线程安全（尤其在多线程环境下）。</li>
</ul>
</li>
<li><strong>工作场景举例：</strong><ul>
<li><strong>配置管理器：</strong> 一个系统通常只需要一份全局配置信息（如数据库连接字符串、应用设置）。使用单例模式确保所有模块访问的都是同一份配置对象，避免重复加载和不一致。</li>
<li><strong>日志记录器：</strong> 应用中的日志记录通常需要集中管理，写入同一个文件或发送到同一个服务。单例模式保证日志记录器实例唯一。</li>
<li><strong>数据库连接池：</strong> 管理有限数据库连接资源的池通常只需要一个实例。</li>
</ul>
</li>
<li><strong>伪代码示例：</strong></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConfigManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ConfigManager</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Properties</span><span class="w"> </span><span class="n">configs</span><span class="p">;</span><span class="w"> </span><span class="c1">// 存放配置</span>

<span class="w">    </span><span class="c1">// 私有构造函数</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">ConfigManager</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">loadConfigs</span><span class="p">();</span><span class="w"> </span><span class="c1">// 加载配置</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 获取单例实例 (简单示例，未考虑线程安全)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ConfigManager</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConfigManager</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getConfig</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">configs</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">loadConfigs</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ... 从文件或数据库加载配置</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 使用</span>
<span class="n">String</span><span class="w"> </span><span class="n">dbUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConfigManager</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">getConfig</span><span class="p">(</span><span class="s">"database.url"</span><span class="p">);</span>
</code></pre></div>
<h3 id="2-factory-method-pattern">2. 工厂方法模式 (Factory Method Pattern)</h3>
<ul>
<li><strong>意图：</strong> 定义一个创建对象的接口，让其子类决定实例化哪一个具体的类。工厂模式使对象的创建过程延迟到子类。</li>
<li><strong>关键点：</strong><ul>
<li>定义一个抽象的 <code>Creator</code> 类，其中包含一个抽象的 <code>factoryMethod()</code> 用于创建产品对象。</li>
<li>具体的 <code>ConcreteCreator</code> 子类实现 <code>factoryMethod()</code>，返回具体的 <code>ConcreteProduct</code> 对象。</li>
<li>客户端代码通过 <code>Creator</code> 的接口调用 <code>factoryMethod()</code> 来获取产品，无需关心具体产品类。</li>
</ul>
</li>
<li><strong>与简单工厂区别：</strong> 简单工厂通常在一个静态方法里根据参数用 <code>if-else/switch</code> 创建不同产品，不符合开闭原则（增加新产品需修改工厂类）。工厂方法模式通过子类化解决了这个问题。</li>
<li><strong>工作场景举例：</strong><ul>
<li><strong>支付系统：</strong> 有 <code>Payment</code> 接口，具体实现有 <code>CreditCardPayment</code>, <code>PayPalPayment</code>, <code>WeChatPayment</code>。定义一个抽象 <code>PaymentProcessor</code> (Creator)，其 <code>createPayment()</code> (factoryMethod) 由 <code>CreditCardProcessor</code>, <code>PayPalProcessor</code> 等子类实现，分别返回对应的支付方式对象。新增支付方式时，只需添加新的 <code>ConcreteProduct</code> 和对应的 <code>ConcreteCreator</code> 子类，无需修改现有处理器代码。</li>
<li><strong>跨平台 UI 组件：</strong> <code>Button</code> 接口，有 <code>WindowsButton</code>, <code>MacButton</code> 实现。抽象 <code>Dialog</code> (Creator) 定义 <code>createButton()</code> (factoryMethod)。<code>WindowsDialog</code> 和 <code>MacDialog</code> 子类分别实现 <code>createButton()</code> 返回对应平台的按钮。应用根据运行平台创建相应的 <code>Dialog</code> 子类。</li>
<li><strong>文档处理系统：</strong> <code>Document</code> 接口 (Product)，有 <code>WordDocument</code>, <code>PDFDocument</code> 实现。<code>Application</code> (Creator) 定义 <code>createDocument()</code> (factoryMethod)。<code>WordApp</code>, <code>PDFApp</code> 子类实现该方法创建特定类型文档。</li>
</ul>
</li>
<li><strong>示例：</strong>
在RAG系统中，第一步需要加载各种类型的文档（PDF、Word、HTML等）。每种文档类型需要不同的加载器实现，工厂模式完美解决这个问题：</li>
</ul>
<div class="mermaid">classDiagram

    DocumentLoader &lt;|-- PdfDocumentLoader
    DocumentLoader &lt;|-- WordDocumentLoader
    DocumentLoader &lt;|-- TextDocumentLoader
    DocumentLoader &lt;|-- HtmlDocumentLoader

    DocumentLoaderFactory ..&gt; DocumentLoader : create
    DocumentLoader ..&gt; Document : returns
    class Document {
        -content: str
        -metadata: dict
        +__init__(content: str, metadata: dict)
        +__repr__(): str
    }

    class DocumentLoader {
        +load(file_path: str) Document
    }

    class PdfDocumentLoader {
        +load(file_path: str) Document
    }

    class WordDocumentLoader {
        +load(file_path: str) Document
    }

    class TextDocumentLoader {
        +load(file_path: str) Document
    }

    class HtmlDocumentLoader {
        +load(file_path: str) Document
    }

    class DocumentLoaderFactory {
        +create_loader(file_path: str) DocumentLoader
    }

</div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># 文档类 - 表示加载后的文档内容</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Document</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">"Document(content=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">..., metadata=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">)"</span>

<span class="c1"># 文档加载器接口</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DocumentLoader</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""加载文档并返回Document对象"""</span>
        <span class="k">pass</span>

<span class="c1"># 具体加载器实现</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PdfDocumentLoader</span><span class="p">(</span><span class="n">DocumentLoader</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
        <span class="c1"># 实际应用中会使用PyPDF2、pdfplumber等库</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"使用PDF加载器处理: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="c1"># 模拟PDF加载逻辑</span>
        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"PDF内容: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"pdf"</span><span class="p">,</span>
            <span class="s2">"pages"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">"author"</span><span class="p">:</span> <span class="s2">"PDF Author"</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Document</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">WordDocumentLoader</span><span class="p">(</span><span class="n">DocumentLoader</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
        <span class="c1"># 实际应用中会使用python-docx库</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"使用Word加载器处理: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="c1"># 模拟Word加载逻辑</span>
        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Word内容: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"docx"</span><span class="p">,</span>
            <span class="s2">"sections"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">"created_by"</span><span class="p">:</span> <span class="s2">"Word User"</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Document</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TextDocumentLoader</span><span class="p">(</span><span class="n">DocumentLoader</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
        <span class="c1"># 实际应用中直接读取文件内容</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"使用文本加载器处理: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="c1"># 模拟文本加载逻辑</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>  <span class="c1"># 只读取前500字符作为示例</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"txt"</span><span class="p">,</span>
            <span class="s2">"encoding"</span><span class="p">:</span> <span class="s2">"utf-8"</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Document</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HtmlDocumentLoader</span><span class="p">(</span><span class="n">DocumentLoader</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
        <span class="c1"># 实际应用中会使用BeautifulSoup等库</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"使用HTML加载器处理: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="c1"># 模拟HTML加载逻辑</span>
        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"HTML内容: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"html"</span><span class="p">,</span>
            <span class="s2">"tags"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"p"</span><span class="p">,</span> <span class="s2">"h1"</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Document</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="c1"># 文档加载器工厂</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DocumentLoaderFactory</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_loader</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DocumentLoader</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""根据文件扩展名创建对应的文档加载器"""</span>
        <span class="c1"># 获取文件扩展名（不带点）</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="c1"># 映射文件类型到对应的加载器</span>
        <span class="n">loader_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'pdf'</span><span class="p">:</span> <span class="n">PdfDocumentLoader</span><span class="p">,</span>
            <span class="s1">'docx'</span><span class="p">:</span> <span class="n">WordDocumentLoader</span><span class="p">,</span>
            <span class="s1">'doc'</span><span class="p">:</span> <span class="n">WordDocumentLoader</span><span class="p">,</span>
            <span class="s1">'txt'</span><span class="p">:</span> <span class="n">TextDocumentLoader</span><span class="p">,</span>
            <span class="s1">'html'</span><span class="p">:</span> <span class="n">HtmlDocumentLoader</span><span class="p">,</span>
            <span class="s1">'htm'</span><span class="p">:</span> <span class="n">HtmlDocumentLoader</span>
        <span class="p">}</span>

        <span class="c1"># 获取对应的加载器类</span>
        <span class="n">loader_class</span> <span class="o">=</span> <span class="n">loader_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">loader_class</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">loader_class</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"不支持的文件类型: </span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># RAG系统文档处理模块</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RAGDocumentProcessor</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loaded_documents</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""处理目录中的所有文档"""</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">开始处理目录: </span><span class="si">{</span><span class="n">directory_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="c1"># 遍历目录中的所有文件</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory_path</span><span class="p">):</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

            <span class="c1"># 跳过目录</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># 使用工厂创建加载器</span>
                <span class="n">loader</span> <span class="o">=</span> <span class="n">DocumentLoaderFactory</span><span class="o">.</span><span class="n">create_loader</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

                <span class="c1"># 加载文档</span>
                <span class="n">document</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

                <span class="c1"># 添加到已加载文档列表</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loaded_documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>

                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"成功加载文档: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"元数据: </span><span class="si">{</span><span class="n">document</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"跳过文件 </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"处理文件 </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> 时出错: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_document_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loaded_documents</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">show_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">已加载文档摘要:"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">doc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loaded_documents</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">doc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># 客户端代码</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="c1"># 创建RAG处理器</span>
    <span class="n">processor</span> <span class="o">=</span> <span class="n">RAGDocumentProcessor</span><span class="p">()</span>

    <span class="c1"># 处理文档目录</span>
    <span class="n">sample_dir</span> <span class="o">=</span> <span class="s2">"sample_docs"</span>

    <span class="c1"># 创建示例目录（实际使用时应替换为真实目录）</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># 创建一些示例文件</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">,</span> <span class="s2">"report.pdf"</span><span class="p">),</span> <span class="s1">'w'</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">,</span> <span class="s2">"manual.docx"</span><span class="p">),</span> <span class="s1">'w'</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">,</span> <span class="s2">"notes.txt"</span><span class="p">),</span> <span class="s1">'w'</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">,</span> <span class="s2">"index.html"</span><span class="p">),</span> <span class="s1">'w'</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">,</span> <span class="s2">"data.csv"</span><span class="p">),</span> <span class="s1">'w'</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 不支持的类型</span>

    <span class="c1"># 处理目录</span>
    <span class="n">processor</span><span class="o">.</span><span class="n">process_directory</span><span class="p">(</span><span class="n">sample_dir</span><span class="p">)</span>

    <span class="c1"># 显示结果</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">总共加载文档: </span><span class="si">{</span><span class="n">processor</span><span class="o">.</span><span class="n">get_document_count</span><span class="p">()</span><span class="si">}</span><span class="s2">个"</span><span class="p">)</span>
    <span class="n">processor</span><span class="o">.</span><span class="n">show_documents</span><span class="p">()</span>
</code></pre></div>
<h2 id="structural-patterns-">二、 结构型模式 (Structural Patterns) - 关注类和对象的组合</h2>
<h3 id="3-decorator-pattern">3. 装饰器模式 (Decorator Pattern)</h3>
<ul>
<li><strong>意图：</strong> 动态地给一个对象添加一些额外的职责。就增加功能来说，装饰器模式比生成子类更为灵活。</li>
<li><strong>关键点：</strong><ul>
<li>定义一个组件接口 (<code>Component</code>)。</li>
<li>具体组件 (<code>ConcreteComponent</code>) 实现基础功能。</li>
<li>抽象装饰器 (<code>Decorator</code>) 实现 <code>Component</code> 接口并持有一个 <code>Component</code> 对象的引用（通常通过构造函数注入）。</li>
<li>具体装饰器 (<code>ConcreteDecorator</code>) 继承 <code>Decorator</code>，在调用被装饰对象的操作前后添加新行为。</li>
<li>客户端可以透明地组合装饰器，层层包裹基础组件。</li>
</ul>
</li>
<li>
<p><strong>工作场景举例：</strong></p>
<ul>
<li><strong>Java I/O 流：</strong> <code>InputStream</code> (Component), <code>FileInputStream</code> (ConcreteComponent), <code>FilterInputStream</code> (Decorator), <code>BufferedInputStream</code>, <code>DataInputStream</code> (ConcreteDecorators)。你可以给一个基础文件流 <code>FileInputStream</code> 套上缓冲装饰 <code>BufferedInputStream</code> 提高效率，再套上数据装饰 <code>DataInputStream</code> 读取基本数据类型。</li>
<li><strong>Web 框架中间件/拦截器：</strong> 一个核心请求处理器 (<code>Handler</code>) 处理请求。<code>LoggingMiddleware</code>, <code>AuthenticationMiddleware</code>, <code>CompressionMiddleware</code> 等装饰器可以在请求到达核心处理器前或响应发出后添加日志记录、身份验证、压缩等通用功能。这些中间件可以灵活组合和排序。</li>
<li><strong>GUI 组件：</strong> 一个基础文本框组件 (<code>TextComponent</code>)。<code>ScrollableDecorator</code> 添加滚动条功能，<code>BorderDecorator</code> 添加边框功能。可以单独或组合使用这些装饰器。</li>
</ul>
</li>
<li>
<p><strong>示例：</strong>
<div class="mermaid">classDiagram
    class Coffee {
        +getCost(): double
        +getDescription(): String
    }

    class SimpleCoffee {
        +getCost(): double
        +getDescription(): String
    }

    class CoffeeDecorator {
        -decoratedCoffee: Coffee
        +CoffeeDecorator(coffee: Coffee)
        +getCost(): double
        +getDescription(): String
    }

    class MilkDecorator {
        +getCost(): double
        +getDescription(): String
    }

    class WhipDecorator {
        +getCost(): double
        +getDescription(): String
    }

    Coffee &lt;|.. SimpleCoffee
    Coffee &lt;|.. CoffeeDecorator
    CoffeeDecorator &lt;|-- MilkDecorator
    CoffeeDecorator &lt;|-- WhipDecorator
    CoffeeDecorator --&gt; Coffee : wraps
</div>
<div class="highlight"><pre><span></span><code><span class="c1">// Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Coffee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="nf">getCost</span><span class="p">();</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">getDescription</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Concrete Component</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SimpleCoffee</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Coffee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">getCost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">2.0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDescription</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">"Simple Coffee"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Decorator (抽象装饰器)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CoffeeDecorator</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Coffee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Coffee</span><span class="w"> </span><span class="n">decoratedCoffee</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">CoffeeDecorator</span><span class="p">(</span><span class="n">Coffee</span><span class="w"> </span><span class="n">coffee</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">decoratedCoffee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coffee</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">getCost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">decoratedCoffee</span><span class="p">.</span><span class="na">getCost</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDescription</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">decoratedCoffee</span><span class="p">.</span><span class="na">getDescription</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Concrete Decorators</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MilkDecorator</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">CoffeeDecorator</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MilkDecorator</span><span class="p">(</span><span class="n">Coffee</span><span class="w"> </span><span class="n">coffee</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">coffee</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">getCost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getCost</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span><span class="w"> </span><span class="c1">// 加牛奶的钱</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDescription</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", Milk"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WhipDecorator</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">CoffeeDecorator</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">WhipDecorator</span><span class="p">(</span><span class="n">Coffee</span><span class="w"> </span><span class="n">coffee</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">coffee</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">getCost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getCost</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.7</span><span class="p">;</span><span class="w"> </span><span class="c1">// 加奶油的钱</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDescription</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", Whip"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 客户端使用</span>
<span class="n">Coffee</span><span class="w"> </span><span class="n">myCoffee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleCoffee</span><span class="p">();</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">myCoffee</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" $"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">myCoffee</span><span class="p">.</span><span class="na">getCost</span><span class="p">());</span><span class="w"> </span><span class="c1">// Simple Coffee $2.0</span>

<span class="n">myCoffee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MilkDecorator</span><span class="p">(</span><span class="n">myCoffee</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">myCoffee</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" $"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">myCoffee</span><span class="p">.</span><span class="na">getCost</span><span class="p">());</span><span class="w"> </span><span class="c1">// Simple Coffee, Milk $2.5</span>

<span class="n">myCoffee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">WhipDecorator</span><span class="p">(</span><span class="n">myCoffee</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">myCoffee</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" $"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">myCoffee</span><span class="p">.</span><span class="na">getCost</span><span class="p">());</span><span class="w"> </span><span class="c1">// Simple Coffee, Milk, Whip $3.2</span>
</code></pre></div></p>
</li>
</ul>
<h3 id="4-proxy-pattern">4. 代理模式（Proxy Pattern）</h3>
<ul>
<li><strong>意图：</strong> 为其他对象提供一种代理以控制对这个对象的访问。代理模式在不改变原始对象代码的情况下，通过引入代理对象来扩展功能。</li>
<li><strong>关键点：</strong><ul>
<li>代理类和原始类实现相同的接口</li>
<li>代理类持有原始对象的引用</li>
<li>在访问原始对象前后可添加额外逻辑（如权限验证、延迟加载、缓存等）</li>
<li>客户端通过代理对象间接访问原始对象</li>
</ul>
</li>
<li><strong>常见代理类型：</strong><ul>
<li><strong>虚拟代理：</strong> 延迟创建开销大的对象（如图片加载）</li>
<li><strong>保护代理：</strong> 控制对敏感对象的访问权限</li>
<li><strong>缓存代理：</strong> 为耗时操作提供结果缓存</li>
<li><strong>远程代理：</strong> 为远程对象提供本地代表（如RPC调用）</li>
</ul>
</li>
<li><strong>工作场景举例：</strong><ul>
<li><strong>API访问控制：</strong> 代理验证API调用权限，合法请求才转发给真实服务</li>
<li><strong>图片懒加载：</strong> 网页中用代理对象占位，滚动到视图时再加载真实图片</li>
<li><strong>数据库查询缓存：</strong> 代理缓存频繁查询结果，减轻数据库压力</li>
<li><strong>微服务网关：</strong> 网关作为代理处理认证、限流后再路由到具体服务</li>
<li><strong>Spring AOP：</strong> 通过动态代理实现日志记录、事务管理等横切关注点</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<div class="mermaid">classDiagram
    class Image {
        +display() void
    }

    class RealImage {
        -filename: String
        +RealImage(filename: String)
        +display() void
        -loadFromDisk() void
    }

    class ProxyImage {
        -realImage: RealImage
        -filename: String
        +ProxyImage(filename: String)
        +display() void
    }

    Image &lt;|.. RealImage
    Image &lt;|.. ProxyImage
    ProxyImage --&gt; RealImage : delegates to
</div>
<div class="highlight"><pre><span></span><code><span class="c1">// 1. 定义接口</span>
<span class="kd">interface</span> <span class="nc">Image</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// 2. 真实对象（开销大的图片加载）</span>
<span class="kd">class</span> <span class="nc">RealImage</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Image</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">RealImage</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filename</span><span class="p">;</span>
<span class="w">        </span><span class="n">loadFromDisk</span><span class="p">();</span><span class="w"> </span><span class="c1">// 初始化时立即加载</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">loadFromDisk</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Loading image: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// 实际加载图片的耗时操作...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Displaying image: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 3. 代理对象（实现延迟加载）</span>
<span class="kd">class</span> <span class="nc">ProxyImage</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Image</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">RealImage</span><span class="w"> </span><span class="n">realImage</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ProxyImage</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filename</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 延迟初始化：首次访问时才创建真实对象</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">realImage</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">realImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RealImage</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">realImage</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 4. 客户端使用</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Client</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 创建代理（此时不会加载图片）</span>
<span class="w">        </span><span class="n">Image</span><span class="w"> </span><span class="n">image1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProxyImage</span><span class="p">(</span><span class="s">"photo1.jpg"</span><span class="p">);</span>
<span class="w">        </span><span class="n">Image</span><span class="w"> </span><span class="n">image2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProxyImage</span><span class="p">(</span><span class="s">"photo2.jpg"</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 实际访问时才加载图片</span>
<span class="w">        </span><span class="n">image1</span><span class="p">.</span><span class="na">display</span><span class="p">();</span><span class="w"> </span><span class="c1">// 输出：Loading image: photo1.jpg → Displaying image...</span>
<span class="w">        </span><span class="n">image2</span><span class="p">.</span><span class="na">display</span><span class="p">();</span><span class="w"> </span><span class="c1">// 输出：Loading image: photo2.jpg → Displaying image...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="behavioral-patterns-">三、 行为型模式 (Behavioral Patterns) - 关注对象之间的通信</h2>
<h3 id="5-observer-pattern">5. 观察者模式 (Observer Pattern)</h3>
<ul>
<li><strong>意图：</strong> 定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。</li>
<li><strong>关键点：</strong><ul>
<li><strong>Subject (主题/被观察者)：</strong> 维护一个观察者列表 (<code>Observers</code>)。提供注册 (<code>attach</code>) 和注销 (<code>detach</code>) 观察者的方法。当状态改变时，调用 <code>notifyObservers()</code> 方法通知所有观察者。</li>
<li><strong>Observer (观察者)：</strong> 定义一个更新接口 (<code>update()</code>)，接收主题状态变更的通知。</li>
<li><strong>ConcreteSubject (具体主题)：</strong> 存储具体状态。当状态改变时，调用父类的通知方法。</li>
<li><strong>ConcreteObserver (具体观察者)：</strong> 实现 <code>update()</code> 方法，定义在接收到通知后需要执行的具体动作（通常从 <code>ConcreteSubject</code> 获取所需状态）。</li>
</ul>
</li>
<li><strong>工作场景举例：</strong><ul>
<li><strong>事件驱动系统/GUI 事件处理：</strong> 按钮 (<code>ConcreteSubject</code>) 被点击（状态改变）。注册在该按钮上的点击事件监听器 (<code>ConcreteObserver</code>) 的 <code>update()</code> (或 <code>actionPerformed()</code>) 方法被自动调用执行响应代码。</li>
<li><strong>消息队列/发布-订阅系统：</strong> 消息代理 (<code>Subject</code>) 接收到新消息。所有订阅了该主题 (<code>Topic</code>) 的消费者 (<code>Observers</code>) 都会收到通知并处理消息。这是观察者模式的分布式扩展。</li>
<li><strong>模型-视图-控制器 (MVC) 中的模型(Model)与视图(View)：</strong> 数据模型 (<code>ConcreteSubject</code>) 发生变化（如数据库更新）。所有依赖于该模型的视图 (<code>ConcreteObserver</code>) 会自动刷新以显示最新数据。</li>
<li><strong>用户注册通知：</strong> 用户服务 (<code>ConcreteSubject</code>) 成功注册一个新用户。邮件服务 (<code>ConcreteObserver1</code>) 收到通知发送欢迎邮件；积分服务 (<code>ConcreteObserver2</code>) 收到通知初始化用户积分。</li>
</ul>
</li>
<li><strong>伪代码示例：</strong></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="c1">// Subject (接口或抽象类)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Subject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">attach</span><span class="p">(</span><span class="n">Observer</span><span class="w"> </span><span class="n">observer</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">detach</span><span class="p">(</span><span class="n">Observer</span><span class="w"> </span><span class="n">observer</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">notifyObservers</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Concrete Subject</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WeatherStation</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Subject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">observers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">temperature</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setTemperature</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">temperature</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temperature</span><span class="p">;</span>
<span class="w">        </span><span class="n">notifyObservers</span><span class="p">();</span><span class="w"> </span><span class="c1">// 温度变化，通知所有观察者</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">attach</span><span class="p">(</span><span class="n">Observer</span><span class="w"> </span><span class="n">observer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">observers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">detach</span><span class="p">(</span><span class="n">Observer</span><span class="w"> </span><span class="n">observer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">observers</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">notifyObservers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Observer</span><span class="w"> </span><span class="n">observer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">observers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">observer</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">temperature</span><span class="p">);</span><span class="w"> </span><span class="c1">// 通知观察者最新温度</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Observer</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Observer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">temperature</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Concrete Observers</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PhoneDisplay</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Observer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">temperature</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Phone Display: Current temperature is "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"°C"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TVDisplay</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Observer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">temperature</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"TV Display: The temperature has changed to "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"°C"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 客户端使用</span>
<span class="n">WeatherStation</span><span class="w"> </span><span class="n">station</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">WeatherStation</span><span class="p">();</span>

<span class="n">PhoneDisplay</span><span class="w"> </span><span class="n">phoneDisplay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PhoneDisplay</span><span class="p">();</span>
<span class="n">TVDisplay</span><span class="w"> </span><span class="n">tvDisplay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TVDisplay</span><span class="p">();</span>

<span class="n">station</span><span class="p">.</span><span class="na">attach</span><span class="p">(</span><span class="n">phoneDisplay</span><span class="p">);</span>
<span class="n">station</span><span class="p">.</span><span class="na">attach</span><span class="p">(</span><span class="n">tvDisplay</span><span class="p">);</span>

<span class="n">station</span><span class="p">.</span><span class="na">setTemperature</span><span class="p">(</span><span class="mf">25.5f</span><span class="p">);</span><span class="w"> </span><span class="c1">// 触发通知</span>
<span class="c1">// 输出:</span>
<span class="c1">// Phone Display: Current temperature is 25.5°C</span>
<span class="c1">// TV Display: The temperature has changed to 25.5°C</span>

<span class="n">station</span><span class="p">.</span><span class="na">setTemperature</span><span class="p">(</span><span class="mf">22.0f</span><span class="p">);</span><span class="w"> </span><span class="c1">// 再次触发通知</span>
<span class="c1">// 输出:</span>
<span class="c1">// Phone Display: Current temperature is 22.0°C</span>
<span class="c1">// TV Display: The temperature has changed to 22.0°C</span>
</code></pre></div>
<h3 id="6-strategy-pattern">6. 策略模式 (Strategy Pattern)</h3>
<ul>
<li><strong>意图：</strong> 定义一系列的算法，把它们一个个封装起来，并且使它们可相互替换。策略模式使得算法可独立于使用它的客户端而变化。</li>
<li><strong>关键点：</strong><ul>
<li><strong>Strategy (策略)：</strong> 定义所有支持的算法的公共接口 (<code>execute()</code> 或类似方法)。</li>
<li><strong>ConcreteStrategy (具体策略)：</strong> 实现 <code>Strategy</code> 接口，提供具体的算法实现。</li>
<li><strong>Context (上下文)：</strong> 持有一个 <code>Strategy</code> 对象的引用。通常提供一个方法（如 <code>setStrategy()</code>）让客户端设置具体策略。上下文通过策略接口调用具体策略的算法。</li>
</ul>
</li>
<li><strong>工作场景举例：</strong><ul>
<li><strong>电商促销活动：</strong> 有 <code>DiscountStrategy</code> 接口，具体策略如 <code>PercentageDiscountStrategy</code> (百分比折扣), <code>FixedAmountDiscountStrategy</code> (固定金额减免), <code>NoDiscountStrategy</code> (无折扣)。订单 (<code>Context</code>) 根据当前活动选择一个折扣策略 (<code>setStrategy()</code>)。计算订单总价时，订单对象调用所选策略的 <code>calculateDiscount(Order order)</code> 方法，无需关心具体折扣计算逻辑。促销活动变化时，只需新增或切换策略。</li>
<li><strong>排序算法：</strong> <code>SortStrategy</code> 接口，具体策略如 <code>BubbleSortStrategy</code>, <code>QuickSortStrategy</code>, <code>MergeSortStrategy</code>。一个数据处理器 (<code>Context</code>) 可以根据数据规模或类型动态设置排序策略。</li>
<li><strong>文件压缩工具：</strong> <code>CompressionStrategy</code> 接口，具体策略如 <code>ZipCompressionStrategy</code>, <code>RarCompressionStrategy</code>, <code>GzipCompressionStrategy</code>。压缩工具 (<code>Context</code>) 让用户选择压缩格式（即策略），然后调用相应策略的 <code>compress(File file)</code> 方法。</li>
<li><strong>支付网关集成：</strong> <code>PaymentGatewayStrategy</code> 接口，具体策略如 <code>PayPalGatewayStrategy</code>, <code>StripeGatewayStrategy</code>, <code>AlipayGatewayStrategy</code>。支付服务 (<code>Context</code>) 根据客户选择的支付方式设置对应的策略，处理支付请求时调用策略的 <code>processPayment(PaymentRequest request)</code> 方法。</li>
</ul>
</li>
<li><strong>伪代码示例：</strong></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// Strategy</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">SortingStrategy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Concrete Strategies</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BubbleSortStrategy</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">SortingStrategy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...实现冒泡排序算法...</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Sorting using Bubble Sort"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">QuickSortStrategy</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">SortingStrategy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...实现快速排序算法...</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Sorting using Quick Sort"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Context</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Sorter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SortingStrategy</span><span class="w"> </span><span class="n">strategy</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Sorter</span><span class="p">(</span><span class="n">SortingStrategy</span><span class="w"> </span><span class="n">strategy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strategy</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setStrategy</span><span class="p">(</span><span class="n">SortingStrategy</span><span class="w"> </span><span class="n">strategy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strategy</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sortData</span><span class="p">(</span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">strategy</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">data</span><span class="p">);</span><span class="w"> </span><span class="c1">// 委托给当前策略执行排序</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 客户端使用</span>
<span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">};</span>

<span class="n">Sorter</span><span class="w"> </span><span class="n">sorter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Sorter</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BubbleSortStrategy</span><span class="p">());</span>
<span class="n">sorter</span><span class="p">.</span><span class="na">sortData</span><span class="p">(</span><span class="n">numbers</span><span class="p">);</span><span class="w"> </span><span class="c1">// 输出: Sorting using Bubble Sort</span>

<span class="c1">// 运行时动态切换策略</span>
<span class="n">sorter</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">QuickSortStrategy</span><span class="p">());</span>
<span class="n">sorter</span><span class="p">.</span><span class="na">sortData</span><span class="p">(</span><span class="n">numbers</span><span class="p">);</span><span class="w"> </span><span class="c1">// 输出: Sorting using Quick Sort</span>
</code></pre></div>
<h2 id="_1">总结</h2>
<ol>
<li><strong>理解意图而非死记结构：</strong> 设计模式的核心在于理解它解决什么类型的问题（意图）以及它的优缺点。UML 图是表达方式，不是目的。</li>
<li><strong>组合优于继承：</strong> 很多模式（如策略、装饰器、观察者）都体现了组合的灵活性，比深度继承层次更容易维护和扩展。</li>
<li><strong>面向接口编程：</strong> 设计模式普遍依赖接口或抽象类来定义契约，降低模块间的耦合度。</li>
<li><strong>开闭原则 (OCP)：</strong> 设计模式常常帮助实现“对扩展开放，对修改关闭”。例如，工厂方法、策略、装饰器模式都方便添加新功能而无需修改现有核心代码。</li>
<li><strong>不要过度设计：</strong> 模式是用来解决复杂问题的，如果问题很简单，强行套用模式反而会增加不必要的复杂性。<strong>KISS (Keep It Simple, Stupid) 原则</strong> 和 <strong>YAGNI (You Ain't Gonna Need It) 原则</strong> 同样重要。先写出能工作的、清晰的代码，当发现重复、僵化或难以扩展时，再考虑用合适的设计模式重构。</li>
<li><strong>模式不是银弹：</strong> 每个模式都有其适用场景和代价（如增加类数量、理解难度）。选择最合适的模式解决问题。</li>
</ol>
<p>掌握这些核心设计模式，并在实际项目中识别适用场景加以应用，将极大地提升你设计和编写高质量、可维护软件的能力。</p>
<h2 id="__comments">Comments</h2>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOPeNkAM4CuNUz" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="XJTUGary/XJTUGary.github.io" data-repo-id="R_kgDOPeNkAA" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme)
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: JVM类加载机制详解" class="md-footer__link md-footer__link--prev" href="../../17/jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                JVM类加载机制详解
              </div>
</div>
</a>
<a aria-label="Next: RAG中跨页表格的处理" class="md-footer__link md-footer__link--next" href="../../../09/01/rag%E4%B8%AD%E8%B7%A8%E9%A1%B5%E8%A1%A8%E6%A0%BC%E7%9A%84%E5%A4%84%E7%90%86/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                RAG中跨页表格的处理
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      © 2024 - 2025 Gary. All Rights Reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/XJTUGary" rel="noopener" target="_blank" title="GitHub">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg>
</a>
<a class="md-social__link" href="mailto:wmlgaryx@gmail.com" rel="noopener" target="_blank" title="E-mail">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "navigation.expand", "navigation.footer", "navigation.tabs", "navigation.sections", "navigation.path", "navigation.indexes", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../../../assets/javascripts/bundle.50899def.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>